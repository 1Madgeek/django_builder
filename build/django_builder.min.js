function ModelRenderFactory(){return function(){var a=this;a.base_modal=function(){return base},a.spaces=function(a){var b=a||1;return new Array(b+1).join(" ")},a.model_names=function(a,b){var c=b||"";return Object.keys(a).map(function(b){return a[b].name+c})},a.new_lines=function(a){var b=a||1;return new Array(b+1).join("\n")},a.render_forms_py=function(b,c){var d="from django import forms\n";return d+="from .models import "+a.model_names(c,"").join(", ")+"\n",d+=a.new_lines(2),jQuery.each(c,function(c,e){d+=e.render_forms(b,a)}),d},a.render_tests_py=function(b,c){var d="import unittest\nfrom django.core.urlresolvers import reverse\nfrom django.test import Client\n";return d+="from .models import "+a.model_names(c,"").join(", ")+"\n",d+=a.new_lines(2),jQuery.each(c,function(c,e){d+=e.render_tests(b,a)}),d},a.render_urls_py=function(b,c){var d="from django.conf.urls import patterns, url\n";return d+="from .views import "+a.model_names(c,"ListView").join(", ")+"\n",d+="from .views import "+a.model_names(c,"DetailView").join(", ")+"\n",d+="from .views import "+a.model_names(c,"CreateView").join(", ")+"\n",d+="from .views import "+a.model_names(c,"UpdateView").join(", ")+"\n",d+=a.new_lines(1),d+="urlpatterns = patterns()\n",d+=a.new_lines(1),jQuery.each(c,function(c,e){d+=e.render_urls(b,a)}),d},a.render_admin_py=function(b,c){var d="from django.contrib import admin\nfrom django import forms\n";return d+="from .models import "+a.model_names(c).join(", "),d+=a.new_lines(2),jQuery.each(c,function(c,e){d+=e.render_admin_classes(b,a)}),d},a.render_views_py=function(b,c){var d="from django.views.generic import DetailView, ListView, UpdateView, CreateView\n";return d+="from .models import "+a.model_names(c).join(", "),d+=a.new_lines(1),d+="from .forms import "+a.model_names(c,"Form").join(", "),d+=a.new_lines(2),jQuery.each(c,function(c,e){d+=e.render_view_classes(b,a)}),d},a.render_models_py=function(b,c){var d="from django.db import models\nfrom django.core.urlresolvers import reverse\nfrom django_extensions.db.fields import AutoSlugField\n";return d+=a.new_lines(2),jQuery.each(c,function(c,e){d+=e.render_model_class(b,a)}),d}}}function MessageServiceFactory(){return function(){var a=this;a.base_modal=function(){var a=jQuery("<div>").addClass("modal fade");a.attr("tabindex","-1"),a.attr("role","dialog"),a.css("display","none");var b=jQuery("<div>").addClass("modal-dialog"),c=jQuery("<div>").addClass("modal-content").appendTo(b),d=jQuery("<h4>").addClass("modal-header-inner");return jQuery("<div>").addClass("modal-header").appendTo(c).append(d),jQuery("<div>").addClass("modal-body").appendTo(c),jQuery("<div>").addClass("modal-footer").appendTo(c),a.append(b),a},a.icon=function(a){return jQuery("<icon>").addClass("fa").addClass(a)},a.simple_error=function(b,c){var d=a.base_modal(),e=a.icon("fa-info").addClass("pull-right");d.find(".modal-header-inner").append(e).append(jQuery("<span>").text(b)),d.find(".modal-body").empty().append(c);var f=jQuery("<button>").addClass("btn btn-default").text("Ok");return d.find(".modal-footer").append(f),f.attr("data-dismiss","modal"),d.modal(),d},a.simple_info=function(b,c){var d=a.base_modal(),e=a.icon("fa-info").addClass("pull-right");d.find(".modal-header-inner").append(e).append(jQuery("<span>").text(b)),d.find(".modal-body").empty().append(c);var f=jQuery("<button>").addClass("btn btn-default").text("Ok");return d.find(".modal-footer").append(f),f.attr("data-dismiss","modal"),d.modal(),d},a.simple_confirm=function(b,c,d){var e=a.base_modal();e.find(".modal-header-inner").html(b),e.find(".modal-body").empty().append(c);var f=jQuery("<button>").addClass("btn btn-primary").text("Ok"),g=jQuery("<button>").addClass("btn btn-default").text("Cancel");return e.find(".modal-footer").append(f).append(g),f.click(function(){void 0!=d&&d()}),g.attr("data-dismiss","modal"),f.attr("data-dismiss","modal"),e.modal(),e},a.simple_form=function(b,c,d,e){var f=a.base_modal();f.find(".modal-header-inner").html(b),f.find(".modal-body").empty().append(c).append(d);var g=jQuery("<button>").addClass("btn btn-primary").text("Ok"),h=jQuery("<button>").addClass("btn btn-default").text("Cancel");return f.find(".modal-footer").append(g).append(h),g.click(function(){void 0!=e&&e(d)}),h.attr("data-dismiss","modal"),f.modal(),f},a.simple_input=function(b,c,d){var e=a.base_modal();e.find(".modal-header-inner").html(b);var f=jQuery("<input>").attr("type","text").addClass("form-control");e.find(".modal-body").empty().append(c).append(f);var g=jQuery("<button>").addClass("btn btn-primary").text("Ok"),h=jQuery("<button>").addClass("btn btn-default").text("Cancel");return e.find(".modal-footer").append(g).append(h),g.click(function(){void 0!=d&&d(f.val())}),h.attr("data-dismiss","modal"),g.attr("data-dismiss","modal"),e.modal(),e}}}function RelationshipFactory(){return function(){function a(a){this.name=a.name,this.type=a.type,this.opts=a.opts,this.to=a.to}var b=this;b.relationship_types=function(){return["ForeignKey","OneToOneField"]},b.make_relationship=function(b){return new a(b)}}}function FieldFactory(){return function(){function a(a){this.name=a.name,this.type=a.type,this.opts=a.opts}var b=this;b.field_types=function(){return["TextField","CharField","AutoSlugField","BooleanField","DateField","DateTimeField","DecimalField","FilePathField","FloatField","IntegerField","IPAddressField","GenericIPAddressField","NullBooleanField","TimeField","BinaryField","AutoField"]},b.make_field=function(b){return new a(b)}}}function ModelServiceFactory(){return function(a){function b(a){this.name=a.name,this.fields=a.fields||[],this.relationships=a.relationships||[],this.relationship_names=function(){var a=this;return Object.keys(a.relationships).map(function(b){return a.relationships[b].name})},this.field_names=function(){var a=this;return Object.keys(a.fields).map(function(b){return a.fields[b].name})},this.l_name=function(){return this.name.toLowerCase()},this.has_relationship=function(a){return-1!=this.relationship_names().indexOf(a)},this.has_field=function(a){return-1!=this.field_names().indexOf(a)},this.name_field=function(){return-1!=this.field_names().indexOf("name")?"name":"id"},this.ordering_field=function(){return-1!=this.field_names().indexOf("created")?"created":"id"},this.identifier=function(){return-1!=this.field_names().indexOf("slug")?"slug":"id"},this.render_forms=function(a,b){var c="";return c+="class "+this.name+"Form(forms.ModelForm):\n",c+=b.spaces(4)+"class Meta:\n",c+=b.spaces(8)+"model = "+this.name+"\n",c+=b.spaces(8)+"fields = "+this.form_fields()+"\n",c+=b.new_lines(2)},this.render_tests=function(a,b){var c="";return c+="class "+this.name+"ViewTest(unittest.TestCase):\n",c+=b.spaces(4)+"'''\n",c+=b.spaces(4)+"Tests for "+this.name+"\n",c+=b.spaces(4)+"'''\n",c+=b.spaces(4)+"def setUp(self):\n",c+=b.spaces(8)+"self.client = Client()\n",c+=b.new_lines(1),c+=b.spaces(4)+"def test_list_"+this.l_name()+"(self):\n",c+=b.spaces(8)+"url = reverse('"+a+"_"+this.l_name()+"_list')\n",c+=b.spaces(8)+"response = self.client.get(url)\n",c+=b.spaces(8)+"self.assertEqual(response.status_code, 200)\n",c+=b.new_lines(1),c+=b.spaces(4)+"def test_create_"+this.l_name()+"(self):\n",c+=b.spaces(8)+"url = reverse('"+a+"_"+this.l_name()+"_create')\n",c+=b.spaces(8)+"data = {}\n",c+=b.spaces(8)+"response = self.client.post(url, data=data)\n",c+=b.spaces(8)+"self.assertEqual(response.status_code, 302)\n",c+=b.new_lines(1),c+=b.spaces(4)+"def test_detail_"+this.l_name()+"(self):\n",c+=b.spaces(8)+this.l_name()+" = "+this.name+"()\n",c+=b.spaces(8)+this.l_name()+".save()\n",c+=b.spaces(8)+"url = reverse('"+a+"_"+this.l_name()+"_detail', args=["+this.l_name()+"."+this.identifier()+",]))\n",c+=b.spaces(8)+"response = self.client.get(url)\n",c+=b.spaces(8)+"self.assertEqual(response.status_code, 200)\n",c+=b.new_lines(1),c+=b.spaces(4)+"def test_update_"+this.l_name()+"(self):\n",c+=b.spaces(8)+this.l_name()+" = "+this.name+"()\n",c+=b.spaces(8)+this.l_name()+".save()\n",c+=b.spaces(8)+"data = {}\n",c+=b.spaces(8)+"url = reverse('"+a+"_"+this.l_name()+"_update', args=["+this.l_name()+"."+this.identifier()+",]))\n",c+=b.spaces(8)+"response = self.client.get(url, data)\n",c+=b.spaces(8)+"self.assertEqual(response.status_code, 302)\n",c+=b.new_lines(2)},this.render_urls=function(a,b){var c="";return c+="urlpatterns += patterns('',\n",c+=b.spaces(4)+"# urls for "+this.name+"\n",c+=b.spaces(4)+"url(r'^"+a+"/"+this.l_name()+"/jQuery' "+this.name+"ListView.as_view(), name='"+a+"_"+this.l_name()+"_list'),\n",c+=b.spaces(4)+"url(r'^"+a+"/"+this.l_name()+"/create/$' "+this.name+"CreateView.as_view(), name='"+a+"_"+this.l_name()+"_create'),\n",c+=b.spaces(4)+"url(r'^"+a+"/"+this.l_name()+"/(?P<"+this.identifier()+">\\S+)/$' "+this.name+"UpdateView.as_view(), name='"+a+"_"+this.l_name()+"_update'),\n",c+=b.spaces(4)+"url(r'^"+a+"/"+this.l_name()+"/(?P<"+this.identifier()+">\\S+)/$' "+this.name+"DetailView.as_view(), name='"+a+"_"+this.l_name()+"_detail'),\n",c+=")\n",c+=b.new_lines(1)},this.render_admin_classes=function(a,b){var c="";return c+="class "+this.name+"AdminForm(forms.ModelForm):\n",c+=b.new_lines(1),c+=b.spaces(4)+"class Meta:\n",c+=b.spaces(8)+"model = "+this.name+"\n",c+=b.new_lines(2),c+="class "+this.name+"Admin(admin.ModelAdmin):\n",c+=b.spaces(4)+"form = "+this.name+"AdminForm\n",c+=b.spaces(4)+"list_display = "+this.admin_fields()+"\n",c+=b.spaces(4)+"readonly_fields = "+this.admin_read_only_fields()+"\n",c+=b.new_lines(1),c+="admin.site.register("+this.name+", "+this.name+"Admin)\n",c+=b.new_lines(2)},this.render_view_classes=function(a,b){var c=b.new_lines(1);return c+="class "+this.name+"ListView(ListView):\n",c+=b.spaces(4)+"model = "+this.name+"\n",c+=b.new_lines(2),c+="class "+this.name+"CreateView(CreateView):\n",c+=b.spaces(4)+"model = "+this.name+"\n",c+=b.spaces(4)+"form_class = "+this.name+"Form\n",c+=b.new_lines(2),c+="class "+this.name+"DetailView(DetailView):\n",c+=b.spaces(4)+"model = "+this.name+"\n",c+=b.new_lines(2),c+="class "+this.name+"UpdateView(UpdateView):\n",c+=b.spaces(4)+"model = "+this.name+"\n",c+=b.spaces(4)+"form_class = "+this.name+"Form",c+=b.new_lines(2)},this.render_model_class=function(a,b){var c="class "+this.name+"(models.Model):";return c+=b.new_lines(1),jQuery.each(this.fields,function(a,d){c+=b.spaces(4)+d.name+" = models."+d.type+"("+d.opts+")",c+=b.new_lines(1)}),c+=b.new_lines(1),jQuery.each(this.relationships,function(d,e){c+=b.spaces(4)+e.name+" = models."+e.type+"('"+a.toLowerCase()+"."+e.to+"',"+e.opts+")",c+=b.new_lines(1)}),c+=b.new_lines(1),c+=b.spaces(4)+"class Meta:",c+=b.new_lines(1),c+=b.spaces(8)+"ordering = ('-"+this.ordering_field()+"',)",c+=b.new_lines(2),c+=b.spaces(4)+"def __unicode__(self):",c+=b.new_lines(1),c+=b.spaces(8)+"return u'%s' % self."+this.identifier(),c+=b.new_lines(2),c+=b.spaces(4)+"def get_absolute_url(self):",c+=b.new_lines(1),c+=b.spaces(8)+"return reverse('"+a+"_"+this.l_name()+"_detail', args=(self."+this.identifier()+"', ))",c+=b.new_lines(1),c+=b.new_lines(2),c+=b.spaces(4)+"def get_update_url(self):",c+=b.new_lines(1),c+=b.spaces(8)+"return reverse('"+a+"_"+this.l_name()+"_update', args=(self."+this.identifier()+"', ))",c+=b.new_lines(3)},this.form_fields=function(){return"['"+this.field_names().join("', '")+"']"},this.admin_fields=function(){return"['"+this.field_names().join("', '")+"']"},this.admin_read_only_fields=function(){return"['"+this.field_names().join("', '")+"']"},this.detail=function(){var a='{% extends "base.html" %}\n\n{% block content %}\n<table>';return jQuery.each(this.fields,function(b,c){a+="<tr><td>"+c.name+"</td><td>{{ object."+c.name+" }}</td></tr>\n"}),a+="</table",a+='\n<a href="{{object.get_update_url}}">Edit '+this.name+"</a>\n{% endblock content %}\n"}}return new b(a)}}ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],function(a,b){var c=a("../lib/oop"),d=a("./text").Mode,e=(a("../tokenizer").Tokenizer,a("./python_highlight_rules").PythonHighlightRules),f=a("./folding/pythonic").FoldMode,g=a("../range").Range,h=function(){this.HighlightRules=e,this.foldingRules=new f("\\:")};c.inherits(h,d),function(){this.lineCommentStart="#",this.getNextLineIndent=function(a,b,c){var d=this.$getIndent(b),e=this.getTokenizer().getLineTokens(b,a),f=e.tokens;if(f.length&&"comment"==f[f.length-1].type)return d;if("start"==a){var g=b.match(/^.*[\{\(\[\:]\s*$/);g&&(d+=c)}return d};var a={pass:1,"return":1,raise:1,"break":1,"continue":1};this.checkOutdent=function(b,c,d){if("\r\n"!==d&&"\r"!==d&&"\n"!==d)return!1;var e=this.getTokenizer().getLineTokens(c.trim(),b).tokens;if(!e)return!1;do var f=e.pop();while(f&&("comment"==f.type||"text"==f.type&&f.value.match(/^\s+$/)));return f?"keyword"==f.type&&a[f.value]:!1},this.autoOutdent=function(a,b,c){c+=1;var d=this.$getIndent(b.getLine(c)),e=b.getTabString();d.slice(-e.length)==e&&b.remove(new g(c,d.length-e.length,c,d.length))},this.$id="ace/mode/python"}.call(h.prototype),b.Mode=h}),ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(a,b){var c=a("../lib/oop"),d=a("./text_highlight_rules").TextHighlightRules,e=function(){var a="and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield",b="True|False|None|NotImplemented|Ellipsis|__debug__",c="abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|set|apply|delattr|help|next|setattr|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern",d=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":c,"constant.language":b,keyword:a},"identifier"),e="(?:r|u|ur|R|U|UR|Ur|uR)?",f="(?:(?:[1-9]\\d*)|(?:0))",g="(?:0[oO]?[0-7]+)",h="(?:0[xX][\\dA-Fa-f]+)",i="(?:0[bB][01]+)",j="(?:"+f+"|"+g+"|"+h+"|"+i+")",k="(?:[eE][+-]?\\d+)",l="(?:\\.\\d+)",m="(?:\\d+)",n="(?:(?:"+m+"?"+l+")|(?:"+m+"\\.))",o="(?:(?:"+n+"|"+m+")"+k+")",p="(?:"+o+"|"+n+")",q="\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'\"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})";this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:e+'"{3}',next:"qqstring3"},{token:"string",regex:e+'"(?=.)',next:"qqstring"},{token:"string",regex:e+"'{3}",next:"qstring3"},{token:"string",regex:e+"'(?=.)",next:"qstring"},{token:"constant.numeric",regex:"(?:"+p+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:p},{token:"constant.numeric",regex:j+"[lL]\\b"},{token:"constant.numeric",regex:j+"\\b"},{token:d,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+"}],qqstring3:[{token:"constant.language.escape",regex:q},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:q},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:q},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:q},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}]}};c.inherits(e,d),b.PythonHighlightRules=e}),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(a,b){var c=a("../../lib/oop"),d=a("./fold_mode").FoldMode,e=b.FoldMode=function(a){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+a+")(?:\\s*)(?:#.*)?$")};c.inherits(e,d),function(){this.getFoldWidgetRange=function(a,b,c){var d=a.getLine(c),e=d.match(this.foldingStartMarker);return e?e[1]?this.openingBracketBlock(a,e[1],c,e.index):e[2]?this.indentationBlock(a,c,e.index+e[2].length):this.indentationBlock(a,c):void 0}}.call(e.prototype)}),ace.define("ace/theme/dawn",["require","exports","module","ace/lib/dom"],function(a,b){b.isDark=!1,b.cssClass="ace-dawn",b.cssText=".ace-dawn .ace_gutter {background: #ebebeb;color: #333}.ace-dawn .ace_print-margin {width: 1px;background: #e8e8e8}.ace-dawn {background-color: #F9F9F9;color: #080808}.ace-dawn .ace_cursor {color: #000000}.ace-dawn .ace_marker-layer .ace_selection {background: rgba(39, 95, 255, 0.30)}.ace-dawn.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #F9F9F9;border-radius: 2px}.ace-dawn .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-dawn .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(75, 75, 126, 0.50)}.ace-dawn .ace_marker-layer .ace_active-line {background: rgba(36, 99, 180, 0.12)}.ace-dawn .ace_gutter-active-line {background-color : #dcdcdc}.ace-dawn .ace_marker-layer .ace_selected-word {border: 1px solid rgba(39, 95, 255, 0.30)}.ace-dawn .ace_invisible {color: rgba(75, 75, 126, 0.50)}.ace-dawn .ace_keyword,.ace-dawn .ace_meta {color: #794938}.ace-dawn .ace_constant,.ace-dawn .ace_constant.ace_character,.ace-dawn .ace_constant.ace_character.ace_escape,.ace-dawn .ace_constant.ace_other {color: #811F24}.ace-dawn .ace_invalid.ace_illegal {text-decoration: underline;font-style: italic;color: #F8F8F8;background-color: #B52A1D}.ace-dawn .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #B52A1D}.ace-dawn .ace_support {color: #691C97}.ace-dawn .ace_support.ace_constant {color: #B4371F}.ace-dawn .ace_fold {background-color: #794938;border-color: #080808}.ace-dawn .ace_list,.ace-dawn .ace_markup.ace_list,.ace-dawn .ace_support.ace_function {color: #693A17}.ace-dawn .ace_storage {font-style: italic;color: #A71D5D}.ace-dawn .ace_string {color: #0B6125}.ace-dawn .ace_string.ace_regexp {color: #CF5628}.ace-dawn .ace_comment {font-style: italic;color: #5A525F}.ace-dawn .ace_heading,.ace-dawn .ace_markup.ace_heading {color: #19356D}.ace-dawn .ace_variable {color: #234A97}.ace-dawn .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYLh/5+x/AAizA4hxNNsZAAAAAElFTkSuQmCC) right repeat-y}";var c=a("../lib/dom");c.importCssString(b.cssText,b.cssClass)});var global=Function("return this;")();!function(a){function b(a){var b=g[a]||window[a];if(!b)throw new Error("Requested module '"+a+"' has not been defined.");return b}function c(a,b){return g[a]=b}function d(a,b){for(var c in b)"noConflict"!=c&&"_VERSION"!=c&&(a[c]=b[c]);return a}function e(a,b,c){return"string"==typeof a||a.nodeName||a.length&&"item"in a||a==window?(c=f._select(a,b),c.selector=a):c=isFinite(a.length)?a:[a],d(c,e)}function f(a,b){return e(a,b)}a.global=a;var g={},h=a.$;a.provide=c,a.require=b,d(f,{_VERSION:"0.3.6",fn:e,ender:function(a,b){d(b?e:f,a)},_select:function(a,b){return(b||document).querySelectorAll(a)}}),d(e,{forEach:function(a,b,c){for(c=0,l=this.length;l>c;++c)c in this&&a.call(b||this[c],this[c],c,this);return this},$:f}),f.noConflict=function(){return a.$=h,this},"undefined"!=typeof module&&module.exports&&(module.exports=f),a.ender=a.$=a.ender||f}(this),function(){{var a={exports:{}};a.exports,require("ender")}!function(){"use strict";function b(a){var b,c=new Uint8Array(a);for(b=0;a>b;b+=1)c[b]=0;return c}function c(a,c,d,e){var f=c+d,g=b((parseInt(f/e)+1)*e);return g.set(a),g}function d(a,b,c){return a=a.toString(c||8),"000000000000".substr(a.length+12-b)+a}function e(a,c,d){var e,f;for(c=c||b(a.length),d=d||0,e=0,f=a.length;f>e;e+=1)c[d]=a.charCodeAt(e),d+=1;return c}function f(a){function b(a){return g[a>>18&63]+g[a>>12&63]+g[a>>6&63]+g[63&a]}var c,d,e,f=a.length%3,h="";for(c=0,e=a.length-f;e>c;c+=3)d=(a[c]<<16)+(a[c+1]<<8)+a[c+2],h+=b(d);switch(h.length%4){case 1:h+="=";break;case 2:h+="=="}return h}var g=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];a.exports.clean=b,a.exports.pad=d,a.exports.extend=c,a.exports.stringToUint8=e,a.exports.uint8ToBase64=f}(),provide("tar-js/utils",a.exports)}(global),function(){{var a={exports:{}};a.exports,require("ender")}!function(){"use strict";function b(a,b){var e=d.clean(512),f=0;return c.forEach(function(b){var c,d,g=a[b.field]||"";for(c=0,d=g.length;d>c;c+=1)e[f]=g.charCodeAt(c),f+=1;f+=b.length-c}),"function"==typeof b?b(e,f):e}var c,d=require("tar-js/utils");c=[{field:"fileName",length:100},{field:"fileMode",length:8},{field:"uid",length:8},{field:"gid",length:8},{field:"fileSize",length:12},{field:"mtime",length:12},{field:"checksum",length:8},{field:"type",length:1},{field:"linkName",length:100},{field:"ustar",length:8},{field:"owner",length:32},{field:"group",length:32},{field:"majorNumber",length:8},{field:"minorNumber",length:8},{field:"filenamePrefix",length:155},{field:"padding",length:12}],a.exports.structure=c,a.exports.format=b}(),provide("tar-js/header",a.exports)}(global),function(){{var a={exports:{}};a.exports,require("ender")}!function(){"use strict";function b(a){this.written=0,c=(a||20)*f,this.out=e.clean(c)}var c,d=require("tar-js/header"),e=require("tar-js/utils"),f=512;b.prototype.append=function(a,b,g,h){var i,j,k,l,m,n,o;if("string"==typeof b)b=e.stringToUint8(b);else if(b.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+b.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];"function"==typeof g&&(h=g,g={}),g=g||{},k=g.mode||4095&parseInt("777",8),l=g.mtime||Math.floor(+new Date/1e3),m=g.uid||0,n=g.gid||0,i={fileName:a,fileMode:e.pad(k,7),uid:e.pad(m,7),gid:e.pad(n,7),fileSize:e.pad(b.length,11),mtime:e.pad(l,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:g.owner||"",group:g.group||""},j=0,Object.keys(i).forEach(function(a){var b,c,d=i[a];for(b=0,c=d.length;c>b;b+=1)j+=d.charCodeAt(b)}),i.checksum=e.pad(j,6)+"\x00 ",o=d.format(i);return this.out.set(o,this.written),this.written+=o.length,this.written+b.length>this.out.length&&(this.out=e.extend(this.out,this.written,b.length,c)),this.out.set(b,this.written),this.written+=b.length+(f-(b.length%f||f)),this.out.length-this.written<2*f&&(this.out=e.extend(this.out,this.written,2*f,c)),"function"==typeof h&&h(this.out),this.out},b.prototype.clear=function(){this.written=0,this.out=e.clean(c)},a.exports=b}(),provide("tar-js",a.exports)}(global),angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(a){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var b=function(a,b,c){angular.isDefined(c.showGutter)&&a.renderer.setShowGutter(c.showGutter),angular.isDefined(c.useWrapMode)&&b.setUseWrapMode(c.useWrapMode),angular.isDefined(c.showInvisibles)&&a.renderer.setShowInvisibles(c.showInvisibles),angular.isDefined(c.showIndentGuides)&&a.renderer.setDisplayIndentGuides(c.showIndentGuides),angular.isDefined(c.useSoftTabs)&&b.setUseSoftTabs(c.useSoftTabs),angular.isDefined(c.disableSearch)&&c.disableSearch&&a.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isFunction(c.onLoad)&&c.onLoad(a),angular.isString(c.theme)&&a.setTheme("ace/theme/"+c.theme),angular.isString(c.mode)&&b.setMode("ace/mode/"+c.mode)};return{restrict:"EA",require:"?ngModel",link:function(c,d,e,f){var g,h,i=a.ace||{},j=angular.extend({},i,c.$eval(e.uiAce)),k=window.ace.edit(d[0]),l=k.getSession(),m=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);angular.isDefined(a)&&c.$apply(function(){if(!angular.isFunction(a))throw new Error("ui-ace use a function as callback.");a(b)})},n={onChange:function(a){return function(b){var d=l.getValue();d===c.$eval(e.value)||c.$$phase||c.$root.$$phase||(angular.isDefined(f)&&c.$apply(function(){f.$setViewValue(d)}),m(a,b,k))}},onBlur:function(a){return function(){m(a,k)}}};e.$observe("readonly",function(a){k.setReadOnly("true"===a)}),angular.isDefined(f)&&(f.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-ace cannot use an object or an array as a model");return a}),f.$render=function(){l.setValue(f.$viewValue)}),b(k,l,j),c.$watch(e.uiAce,function(){j=angular.extend({},i,c.$eval(e.uiAce)),l.removeListener("change",g),g=n.onChange(j.onChange),l.on("change",g),k.removeListener("blur",h),h=n.onBlur(j.onBlur),k.on("blur",h),b(k,l,j)},!0),g=n.onChange(j.onChange),l.on("change",g),h=n.onBlur(j.onBlur),k.on("blur",h),d.on("$destroy",function(){k.session.$stopWorker(),k.destroy()}),c.$watch(function(){return[d[0].offsetWidth,d[0].offsetHeight]},function(){k.resize(),k.renderer.updateFull()},!0)}}}]),function(){"use strict";var a=angular.module("LocalStorageModule",[]);a.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){this.prefix=a},this.setStorageType=function(a){this.storageType=a},this.setStorageCookie=function(a,b){this.cookie={expiry:a,path:b}},this.setStorageCookieDomain=function(a){this.cookie.domain=a},this.setNotify=function(a,b){this.notify={setItem:a,removeItem:b}},this.$get=["$rootScope","$window","$document",function(a,b,c){var d,e=this.prefix,f=this.cookie,g=this.notify,h=this.storageType;c||(c=document),"."!==e.substr(-1)&&(e=e?e+".":"");var i=function(a){return e+a},j=function(){try{var c=h in b&&null!==b[h],e=i("__"+Math.round(1e7*Math.random()));return c&&(d=b[h],d.setItem(e,""),d.removeItem(e)),c}catch(f){return h="cookie",a.$broadcast("LocalStorageModule.notification.error",f.message),!1}}(),k=function(b,c){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),q(b,c);"undefined"==typeof c&&(c=null);try{(angular.isObject(c)||angular.isArray(c))&&(c=angular.toJson(c)),d&&d.setItem(i(b),c),g.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:this.storageType})}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.message),q(b,c)}return!0},l=function(b){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r(b);var c=d?d.getItem(i(b)):null;return c&&"null"!==c?"{"===c.charAt(0)||"["===c.charAt(0)?angular.fromJson(c):c:null},m=function(b){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:"cookie"}),s(b);try{d.removeItem(i(b)),g.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:this.storageType})}catch(c){return a.$broadcast("LocalStorageModule.notification.error",c.message),s(b)}return!0},n=function(){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var b=e.length,c=[];for(var f in d)if(f.substr(0,b)===e)try{c.push(f.substr(b))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.Description),[]}return c},o=function(b){b=b||"";var c=e.slice(0,-1),f=new RegExp(c+"."+b);if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),t();var g=e.length;for(var h in d)if(f.test(h))try{m(h.substr(g))}catch(i){return a.$broadcast("LocalStorageModule.notification.error",i.message),t()}return!0},p=function(){try{return navigator.cookieEnabled||"cookie"in c&&(c.cookie.length>0||(c.cookie="test").indexOf.call(c.cookie,"test")>-1)}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.message),!1}},q=function(b,d){if("undefined"==typeof d)return!1;if(!p())return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var e="",g=new Date,h="";if(null===d?(g.setTime(g.getTime()+-864e5),e="; expires="+g.toGMTString(),d=""):0!==f.expiry&&(g.setTime(g.getTime()+24*f.expiry*60*60*1e3),e="; expires="+g.toGMTString()),b){var j="; path="+f.path;f.domain&&(h="; domain="+f.domain),c.cookie=i(b)+"="+encodeURIComponent(d)+e+j+h}}catch(k){return a.$broadcast("LocalStorageModule.notification.error",k.message),!1}return!0},r=function(b){if(!p())return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var d=c.cookie&&c.cookie.split(";")||[],f=0;f<d.length;f++){for(var g=d[f];" "===g.charAt(0);)g=g.substring(1,g.length);if(0===g.indexOf(i(b)+"="))return decodeURIComponent(g.substring(e.length+b.length+1,g.length))}return null},s=function(a){q(a,null)},t=function(){for(var a=null,b=e.length,d=c.cookie.split(";"),f=0;f<d.length;f++){for(a=d[f];" "===a.charAt(0);)a=a.substring(1,a.length);var g=a.substring(b,a.indexOf("="));s(g)}},u=function(){return h},v=function(a,b,c){var d=l(b);null===d&&angular.isDefined(c)?d=c:angular.isObject(d)&&angular.isObject(c)&&(d=angular.extend(c,d)),a[b]=d,a.$watchCollection(b,function(a){k(b,a)})};return{isSupported:j,getStorageType:u,set:k,add:k,get:l,keys:n,remove:m,clearAll:o,bind:v,deriveKey:i,cookie:{set:q,add:q,get:r,remove:s,clearAll:t}}}]})}.call(this),angular.module("builder",["ngRoute","builder.filters","builder.services","builder.directives","builder.controllers","LocalStorageModule","ui.ace"]).config(["$routeProvider","$locationProvider",function(a){a.when("/models",{templateUrl:"partials/models.html",controller:"ModelController"}),a.when("/home",{templateUrl:"partials/home.html",controller:"ModelController"}),a.otherwise({redirectTo:"/home"})}]),angular.module("builder.controllers",["LocalStorageModule"]).controller("ModelController",["$scope","$http","ModelFactory","FieldFactory","RelationshipFactory","localStorageService","MessageService","RenderFactory",function(a,b,c,d,e,f,g,h){$=jQuery(),a.models=[],a.messageService=new g,a.field_factory=new d,a.relationship_factory=new e,a.render_factory=new h,a.editors=[],a.models_storage_key="local_models",a._app_name="MyApp",a.storageType="Local storage",a.create_tar_ball=function(){function b(a){var b,c,d="";for(b=0,c=a.length;c>b;b+=1)d+=String.fromCharCode(a[b]);return d}var c="Built with django_builder\n",d=a.render_factory.render_models_py(a.app_name(),a.models),e=a.render_factory.render_views_py(a.app_name(),a.models),f=a.render_factory.render_admin_py(a.app_name(),a.models),g=a.render_factory.render_urls_py(a.app_name(),a.models),h=a.render_factory.render_tests_py(a.app_name(),a.models),i=a.render_factory.render_forms_py(a.app_name(),a.models),j=require("tar-js"),k=new j;k.append("README.txt",c),k.append(a.app_name()+"/models.py",d),k.append(a.app_name()+"/views.py",e),k.append(a.app_name()+"/admin.py",f),k.append(a.app_name()+"/urls.py",g),k.append(a.app_name()+"/tests.py",h);var l=k.append(a.app_name()+"/forms.py",i),m=btoa(b(l)),n="data:application/tar;base64,"+m,o=document.getElementById("download_iframe");o.src=n},a.aceLoad=function(b){var c=jQuery(b.container).attr("id");"builder_models"==c?b.setValue(a.render_factory.render_models_py(a.app_name(),a.models)):"builder_views"==c?b.setValue(a.render_factory.render_views_py(a.app_name(),a.models)):"builder_admin"==c?b.setValue(a.render_factory.render_admin_py(a.app_name(),a.models)):"builder_urls"==c?b.setValue(a.render_factory.render_urls_py(a.app_name(),a.models)):"builder_tests"==c?b.setValue(a.render_factory.render_tests_py(a.app_name(),a.models)):"builder_forms"==c&&b.setValue(a.render_factory.render_forms_py(a.app_name(),a.models)),b.session.selection.clearSelection()
},a.reLoadAce=function(){jQuery().each(a.editors,function(b,c){a.aceLoad(c)})},a.aceLoaded=function(b){b.setOptions({readOnly:!0,highlightActiveLine:!1,highlightGutterLine:!1,maxLines:1/0}),b.renderer.$cursorLayer.element.style.opacity=0,void 0!=b&&a.aceLoad(b),a.editors.push(b)},a.$watch("models",function(){a.reLoadAce()},!0),a.aceChanged=function(){},a.$watch("localStorageDemo",function(b){f.set("localStorageDemo",b),a.localStorageDemoValue=f.get("localStorageDemo")}),f.getStorageType().indexOf("session")>=0&&(a.storageType="Session storage"),f.isSupported||(a.storageType="Cookie"),a.set_app_name=function(){a._app_name=jQuery("input#appname").val(),a.reLoadAce()},a.l_app_name=function(){return a._app_name.toLowerCase()},a.app_name=function(){return a._app_name.replace(" ","_")},a.updateModel=function(b){var c=a.models.indexOf(b);a.models[c]=b,f.set(a.models_storage_key,JSON.stringify(a.models))},a.saveModels=function(){f.set(a.models_storage_key,JSON.stringify(a.models))},a.clearModels=function(){var b=function(){f.set(a.models_storage_key,""),a.loadModels(),a.models=[],a.$apply()};a.messageService.simple_confirm("Confirm","Remove all models?",b).modal("show")},a.addModel=function(){var b=jQuery("input#builder_model_name"),d=b.val();if(void 0==d||""===d)a.messageService.simple_info("Input Required","No model name entered").modal("show");else{var e={name:d};e.fields=[a.field_factory.make_field({name:"name",type:"CharField",opts:"max_length=255"}),a.field_factory.make_field({name:"slug",type:"AutoSlugField",opts:"populate_from='name', blank=True, editable=True"}),a.field_factory.make_field({name:"created",type:"DateTimeField",opts:"auto_now_add=True, editable=False"}),a.field_factory.make_field({name:"last_updated",type:"DateTimeField",opts:"auto_now=True, editable=False"})];var f=c(e);a.models.push(f),a.saveModels(),b.val("")}},a.cleanModel=function(a){delete a.$$hashKey,void 0!=a.fields&&jQuery().each(a.fields,function(a,b){delete b.$$hashKey}),void 0!=a.relationships&&jQuery().each(a.relationships,function(a,b){delete b.$$hashKey})},a.loadModels=function(){var b=f.get(a.models_storage_key);return void 0==b?[]:(jQuery.each(b,function(b,c){a.cleanModel(c)}),b)},a.loadModel=function(b){var d=c(b);a.models.push(d)},a.__init__=function(){jQuery.each(a.loadModels(),function(b,c){a.loadModel(c)})},a.__init__(),a.debug=function(){console.log(JSON.stringify(a.models))},a.add_relationship=function(b){var c,d=function(d){var e=d.find("input[name=name]").val();if(void 0===e||""===e)d.find("div.form-group-name").addClass("has-error").append(jQuery("<span>").addClass("glyphicon glyphicon-remove form-control-feedback")).find(".help-block").removeClass("hide").text("Field Required");else{var f=a.models[b];if(f.has_relationship(e))d.find("div.form-group-name").addClass("has-error").append(jQuery("<span>").addClass("glyphicon glyphicon-remove form-control-feedback")).find(".help-block").removeClass("hide").text('Field "'+e+'" exists');else{var g=d.find("select[name=type]").val(),h=d.find("input[name=opts]").val(),i=d.find("select[name=to]").val(),j=a.relationship_factory.make_relationship({name:e,type:g,opts:h,to:i});f.relationships.push(j),a.updateModel(f),a.$apply(),c.modal("hide")}}},e=jQuery("<form>"),f=jQuery("<div>").addClass("form-group form-group-name has-feedback").appendTo(e),g=jQuery("<div>").addClass("form-group form-group-type").appendTo(e),h=jQuery("<div>").addClass("form-group form-group-args").appendTo(e);f.append(jQuery("<label>").text("Name")),f.append(jQuery("<input>").attr("name","name").addClass("form-control")),f.append(jQuery("<span>").text("error message").addClass("help-block hide"));var i=jQuery("<select>").attr("name","to").addClass("form-control");jQuery.each(a.models,function(a,b){i.append(jQuery("<option>").attr("val",b.name).text(b.name))}),g.append(jQuery("<label>").text("Relationship to Model")),g.append(i);var j=jQuery("<select>").attr("name","type").addClass("form-control");jQuery.each(a.relationship_factory.relationship_types(),function(a,b){j.append(jQuery("<option>").attr("val",b).text(b))}),g.append(jQuery("<label>").text("Relationship Type")),g.append(j),h.append(jQuery("<label>").text("Arguments")),h.append(jQuery("<input>").attr("name","opts").attr("placeholder","options").addClass("form-control")),c=a.messageService.simple_form("Add Relationship","",e,d).modal("show")},a.add_field=function(b){var c,d=function(d){var e=d.find("input[name=name]").val();if(void 0===e||""===e)d.find("div.form-group-name").addClass("has-error").append(jQuery("<span>").addClass("glyphicon glyphicon-remove form-control-feedback")).find(".help-block").removeClass("hide").text("Field Required");else{var f=a.models[b];if(f.has_field(e))d.find("div.form-group-name").addClass("has-error").append(jQuery("<span>").addClass("glyphicon glyphicon-remove form-control-feedback")).find(".help-block").removeClass("hide").text('Field "'+e+'" exists');else{var g=d.find("select[name=type]").val(),h=d.find("input[name=opts]").val(),i=a.field_factory.make_field({name:e,type:g,opts:h});f.fields.push(i),a.updateModel(f),a.$apply(),c.modal("hide")}}},e=jQuery("<form>"),f=jQuery("<div>").addClass("form-group form-group-name  has-feedback").appendTo(e),g=jQuery("<div>").addClass("form-group form-group-type").appendTo(e),h=jQuery("<div>").addClass("form-group form-group-args").appendTo(e);f.append(jQuery("<label>").text("Name")),f.append(jQuery("<input>").attr("name","name").addClass("form-control")),f.append(jQuery("<span>").text("error message").addClass("help-block hide"));var i=jQuery("<select>").attr("name","type").addClass("form-control");jQuery.each(a.field_factory.field_types(),function(a,b){i.append(jQuery("<option>").attr("val",b).text(b))}),g.append(jQuery("<label>").text("Field Type")),g.append(i),h.append(jQuery("<label>").text("Arguments")),h.append(jQuery("<input>").attr("name","opts").attr("placeholder","options").addClass("form-control")),c=a.messageService.simple_form("Add Field","",e,d).modal("show")},a.rename_field=function(b,c){var d=function(d){a.models[b].fields[c].name=d,f.set(a.models_storage_key,JSON.stringify(a.models)),a.$apply()};a.messageService.simple_input("Rename","Rename the field '"+a.models[b].fields[c].name+"'",d).modal("show")},a.remove_relationship=function(b,c){var d=function(){a.models[b].relationships.splice(c,1),f.set(a.models_storage_key,JSON.stringify(a.models)),a.$apply()};a.messageService.simple_confirm("Confirm","Remove the relationship '"+a.models[b].relationships[c].name+"'",d).modal("show")},a.remove_field=function(b,c){var d=function(){a.models[b].fields.splice(c,1),f.set(a.models_storage_key,JSON.stringify(a.models)),a.$apply()};a.messageService.simple_confirm("Confirm","Remove the field '"+a.models[b].fields[c].name+"'",d).modal("show")},a.remove_model=function(b){var c=function(){a.models.splice(b,1),f.set(a.models_storage_key,JSON.stringify(a.models)),a.$apply()};a.messageService.simple_confirm("Confirm","Remove the model '"+a.models[b].name+"'",c).modal("show")};var i=function(a,b){return Object.keys(a).map(function(c){return a[c].name+b})};a.import_views=function(){return"from .views import "+i(a.models,"ListView").join(", ")+", "+i(a.models,"DetailView").join(", ")+", "+i(a.models,"UpdateView").join(", ")+", "+i(a.models,"CreateView").join(", ")},a.import_models=function(){return"from .models import "+i(a.models,"Model").join(", ")},a.import_forms=function(){return"from .forms import "+i(a.models,"Form").join(", ")},a.model_highlight=function(b,c){var d=a.models[b].relationships[c];jQuery(".builder_model_"+d.to).addClass("builder_model_highlight")},a.model_unhighlight=function(){jQuery(".builder_model").removeClass("builder_model_highlight")}}]),angular.module("builder.directives",[]).directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]),angular.module("builder.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]),angular.module("builder.services",[]).factory("ModelFactory",[ModelServiceFactory]).factory("MessageService",[MessageServiceFactory]).factory("FieldFactory",[FieldFactory]).factory("RelationshipFactory",[RelationshipFactory]).factory("RenderFactory",[ModelRenderFactory]).value("version","0.1");